language: java

jdk:
  - oraclejdk8

before_install:
  # Decrypt the credentials we added to the repo using the key we added with the Travis command line tool
  - openssl aes-256-cbc -K $encrypted_45d1b36fa803_key -iv $encrypted_45d1b36fa803_iv -in credentials.tar.gz.enc -out credentials.tar.gz -d
  # If the SDK is not already cached, download it and unpack it
  - tar -xzf credentials.tar.gz
  - mkdir -p lib
install:
  - mvn install -DskipTests=true -B -V -Psign -Dgpg.passphrase=$GPG_PASSPHRASE

script:
  - mvn test -B

deploy:
  provider: gae
  skip_cleanup: true
  keyfile: client-secret.json
  project: swapsipersonalc
  default: true
  on:
    repo: Bookrage001/PersonalSwapsiDev
    all_branches: true
